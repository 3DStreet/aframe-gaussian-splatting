{"version":3,"sources":["./index.js"],"names":["AFRAME","registerComponent","schema","src","type","default","init","this","el","sceneEl","renderer","setPixelRatio","fetch","data","then","blob","res","arrayBuffer","let","size","THREE","Vector2","focal","getSize","y","Math","tan","camera","components","fov","PI","geometry","PlaneGeometry","material","ShaderMaterial","uniforms","viewport","value","Float32Array","x","vertexShader","fragmentShader","blending","CustomBlending","blendSrcAlpha","OneFactor","depthTest","depthWrite","window","addEventListener","u_buffer","Uint8Array","buffer","processPlyBuffer","vertexCount","floor","byteLength","f_buffer","matrices","i","quat","Quaternion","center","Vector3","scale","mtx","Matrix4","mtx_t","makeRotationFromQuaternion","transpose","clone","premultiply","setPosition","elements","j","camera_mtx","object3D","matrixWorld","view","iMesh","InstancedMesh","frustumCulled","instanceMatrix","array","sortSplats","needsUpdate","add","worker","Worker","URL","createObjectURL","Blob","createWorker","toString","postMessage","sortFunction","onmessage","e","sortedMatrices","sortReady","tick","time","timeDelta","self","eval","length","maxDepth","Infinity","minDepth","depthList","sizeList","Int32Array","depth","depthInv","counts0","Uint32Array","starts0","depthIndex","k","inputBuffer","ubuf","header","TextDecoder","decode","slice","header_end_index","indexOf","Error","parseInt","exec","console","log","row_offset","offsets","types","prop","TYPE_MAP","double","int","uint","float","short","ushort","uchar","split","filter","startsWith","name","arrayType","replace","dataView","DataView","row","attrs","Proxy","get","target","opacity","sizeIndex","exp","scale_0","scale_1","scale_2","timeEnd","sort","b","a","ArrayBuffer","SH_C0","position","scales","rgba","Uint8ClampedArray","rot","qlen","sqrt","rot_0","rot_1","rot_2","rot_3","z","f_dc_0","f_dc_1","f_dc_2","red","green","blue"],"mappings":"AAAAA,OAAOC,kBAAkB,qBAAsB,CAC9CC,OAAQ,CACPC,IAAK,CAACC,KAAM,SAAUC,QAAS,aAAa,CAC7C,EACAC,KAAM,WACLC,KAAKC,GAAGC,QAAQC,SAASC,cAAc,CAAC,EAExCC,MAAML,KAAKM,KAAKV,GAAG,EAClBW,KAAK,MAAUD,KAAKE,KAAK,CAAC,EAC1BD,KAAK,KAASE,IAAIC,YAAY,CAAC,EAC/BH,KAAK,SACLI,IAAIC,KAAO,IAAIC,MAAMC,QAGfC,OAFNf,KAAKC,GAAGC,QAAQC,SAASa,QAAQJ,IAAI,EAEtBA,KAAKK,EAAI,EAAOC,KAAKC,IAAInB,KAAKC,GAAGC,QAAQkB,OAAOnB,GAAGoB,WAAWD,OAAOd,KAAKgB,IAAM,EAAMJ,KAAKK,GAAK,GAAK,GAE9GC,SAAW,IAAIX,MAAMY,cAAe,EAAG,CAAC,EAC9C,MAAMC,SAAW,IAAIb,MAAMc,eAAgB,CAC1CC,SAAW,CACVC,SAAU,CAACC,MAAO,IAAIC,aAAa,CAACnB,KAAKoB,EAAGpB,KAAKK,EAAE,CAAC,EACpDF,MAAO,CAACe,MAAOf,KAAK,CACrB,EACAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OA+DAC;;;;;;;;;;MAWAC,SAAWtB,MAAMuB,eACjBC,cAAgBxB,MAAMyB,UACtBC,UAAY,CAAA,EACZC,WAAY,CAAA,CACb,CAAE,EAEFC,OAAOC,iBAAiB,SAAU,KACjC/B,IAAIC,KAAO,IAAIC,MAAMC,QAEfC,OADNf,KAAKC,GAAGC,QAAQC,SAASa,QAAQJ,IAAI,EACtBA,KAAKK,EAAI,EAAOC,KAAKC,IAAInB,KAAKC,GAAGC,QAAQkB,OAAOnB,GAAGoB,WAAWD,OAAOd,KAAKgB,IAAM,EAAMJ,KAAKK,GAAK,GAAK,GACpHG,SAASE,SAASC,SAASC,MAAM,GAAKlB,KAAKoB,EAC3CN,SAASE,SAASC,SAASC,MAAM,GAAKlB,KAAKK,EAC3CS,SAASE,SAASb,MAAMe,MAAQf,KACjC,CAAC,EAEDJ,IAAIgC,SAAW,IAAIC,WAAWC,MAAM,EAEpB,KAAfF,SAAS,IACM,KAAfA,SAAS,IACM,KAAfA,SAAS,IACM,IAAfA,SAAS,KAETE,OAAS7C,KAAK8C,iBAAiBD,MAAM,EACrCF,SAAW,IAAIC,WAAWC,MAAM,GAGjC,IACIE,YAAc7B,KAAK8B,MAAMH,OAAOI,WADlB,EACwC,EACtDC,SAAW,IAAInB,aAAac,MAAM,EAElCM,SAAW,IAAIpB,aAA2B,GAAdgB,WAAgB,EAChD,IAAKpC,IAAIyC,EAAI,EAAGA,EAAIL,YAAaK,CAAC,GAAI,CACrCzC,IAAI0C,KAAO,IAAIxC,MAAMyC,YACnBX,SAAS,GAAKS,EAAI,GAAK,GAAK,KAAO,KACnCT,SAAS,GAAKS,EAAI,GAAK,GAAK,KAAO,IACpC,EAAET,SAAS,GAAKS,EAAI,GAAK,GAAK,KAAO,KACpCT,SAAS,GAAKS,EAAI,IAAU,KAAO,GACrC,EACIG,OAAS,IAAI1C,MAAM2C,QACtBN,SAAS,EAAIE,EAAI,GACjBF,SAAS,EAAIE,EAAI,GACjB,CAACF,SAAS,EAAIE,EAAI,EACnB,EACIK,MAAQ,IAAI5C,MAAM2C,QACrBN,SAAS,EAAIE,EAAI,GACjBF,SAAS,EAAIE,EAAI,EAAI,GACrBF,SAAS,EAAIE,EAAI,EAAI,EACtB,EAEIM,IAAM,IAAI7C,MAAM8C,QAIhBC,MAHJF,IAAIG,2BAA2BR,IAAI,EACnCK,IAAII,UAAU,EACdJ,IAAID,MAAMA,KAAK,EACHC,IAAIK,MAAM,GACtBL,IAAII,UAAU,EACdJ,IAAIM,YAAYJ,IAAK,EACrBF,IAAIO,YAAYV,MAAM,EAGtBG,IAAIQ,SAAS,GAAKvB,SAAS,GAAKS,EAAI,IAAU,IAC9CM,IAAIQ,SAAS,GAAKvB,SAAS,GAAKS,EAAI,GAAK,GAAK,IAC9CM,IAAIQ,SAAS,IAAMvB,SAAS,GAAKS,EAAI,GAAK,GAAK,IAC/CM,IAAIQ,SAAS,IAAMvB,SAAS,GAAKS,EAAI,GAAK,GAAK,IAE/C,IAAIzC,IAAIwD,EAAI,EAAGA,EAAI,GAAIA,CAAC,GACvBhB,SAAa,GAAJC,EAASe,GAAKT,IAAIQ,SAASC,EAEtC,CAEMC,KAAapE,KAAKC,GAAGC,QAAQkB,OAAOnB,GAAGoE,SAASC,YAAYJ,SAC9DK,MAAO,IAAIxC,aAAa,CAACqC,KAAW,GAAIA,KAAW,GAAIA,KAAW,IAAI,EAC1EpE,KAAKwE,MAAQ,IAAI3D,MAAM4D,cAAcjD,SAAUE,SAAUqB,WAAW,EACpE/C,KAAKwE,MAAME,cAAgB,CAAA,EAC3B1E,KAAKwE,MAAMG,eAAeC,MAAQ5E,KAAK6E,WAAW1B,SAAUoB,KAAI,EAChEvE,KAAKwE,MAAMG,eAAeG,YAAc,CAAA,EACxC9E,KAAKC,GAAGoE,SAASU,IAAI/E,KAAKwE,KAAK,EAE/BxE,KAAKgF,OAAS,IAAIC,OACjBC,IAAIC,gBACH,IAAIC,KAAK,CAAC,IAAKpF,KAAKqF,aAAaC,SAAS,EAAG,WAAY,CACxDzF,KAAM,wBACP,CAAC,CACF,CACD,EAEAG,KAAKgF,OAAOO,YAAY,CACvBC,aAAcxF,KAAK6E,WAAWS,SAAS,EACvCnC,SAASA,SAASN,MACnB,EAAG,CAACM,SAASN,OAAO,EAEpB7C,KAAKgF,OAAOS,UAAY,IACvBzF,KAAKwE,MAAMG,eAAeC,MAAQ,IAAI7C,aAAa2D,EAAEpF,KAAKqF,cAAc,EACxE3F,KAAKwE,MAAMG,eAAeG,YAAc,CAAA,EACxC9E,KAAK4F,UAAY,CAAA,CAClB,EACA5F,KAAK4F,UAAY,CAAA,CAClB,CAAC,CACF,EACAC,KAAM,SAASC,KAAMC,WACpB,IAGKxB,WAHFvE,KAAK4F,YACP5F,KAAK4F,UAAY,CAAA,EACXxB,WAAapE,KAAKC,GAAGC,QAAQkB,OAAOnB,GAAGoE,SAASC,YAAYJ,SAC9DK,WAAO,IAAIxC,aAAa,CAACqC,WAAW,GAAIA,WAAW,GAAIA,WAAW,IAAI,EAC1EpE,KAAKgF,OAAOO,YAAY,CAAChB,KAAAA,UAAI,EAAG,CAACA,WAAK1B,OAAO,EAE/C,EACAwC,aAAc,SAAUW,MACvBrF,IAAI6E,aACArC,SACJ6C,KAAKP,UAAY,IAQhB,GAPGC,EAAEpF,KAAKkF,eACTS,KAAKP,EAAEpF,KAAKkF,YAAY,EACxBA,aAAeX,YAEba,EAAEpF,KAAK6C,WACTA,SAAW,IAAIpB,aAAa2D,EAAEpF,KAAK6C,QAAQ,GAEzCuC,EAAEpF,KAAKiE,KAAK,CACd,MAAMA,KAAO,IAAIxC,aAAa2D,EAAEpF,KAAKiE,IAAI,EACnCoB,eAAiBH,aAAarC,SAAUoB,IAAI,EAClDyB,KAAKT,YAAY,CAACI,eAAAA,cAAc,EAAG,CAACA,eAAe9C,OAAO,CAC3D,CACD,CACD,EACAgC,WAAY,SAASA,WAAW1B,SAAUoB,MACzC,IAAMxB,YAAcI,SAAS+C,OAAO,GAEpCvF,IAAIwF,SAAYC,CAAAA,EAAAA,EACZC,SAAWD,EAAAA,EACfzF,IAAI2F,UAAY,IAAIvE,aAAagB,WAAW,EACxCwD,SAAW,IAAIC,WAAWF,UAAUzD,MAAM,EAC9C,IAAKlC,IAAIyC,EAAI,EAAGA,EAAIL,YAAaK,CAAC,GAAI,CACrCzC,IAAI8F,MACH,EAAGlC,KAAK,GAAKpB,SAAa,GAAJC,EAAS,IAC9BmB,KAAK,GAAKpB,SAAa,GAAJC,EAAS,IAC5BmB,KAAK,GAAKpB,SAAa,GAAJC,EAAS,MAC9BkD,UAAUlD,GAAKqD,OACHN,WAAUA,SAAWM,OAC7BA,MAAQJ,WAAUA,SAAWI,MAClC,CAGA9F,IAAI+F,SAAW,OAAmBP,SAAWE,UACzCM,QAAU,IAAIC,YAAY,KAAO,EACrC,IAAKjG,IAAIyC,EAAI,EAAGA,EAAIL,YAAaK,CAAC,GACjCmD,SAASnD,IAAOkD,UAAUlD,GAAKiD,UAAYK,SAAY,EACvDC,QAAQJ,SAASnD,GAAG,GAErBzC,IAAIkG,QAAU,IAAID,YAAY,KAAO,EACrC,IAAKjG,IAAIyC,EAAI,EAAGA,EAAI,MAASA,CAAC,GAAIyD,QAAQzD,GAAKyD,QAAQzD,EAAI,GAAKuD,QAAQvD,EAAI,GAC5EzC,IAAImG,WAAa,IAAIF,YAAY7D,WAAW,EAC5C,IAAKpC,IAAIyC,EAAI,EAAGA,EAAIL,YAAaK,CAAC,GAAI0D,WAAWD,QAAQN,SAASnD,GAAG,IAAMA,EAE3EzC,IAAIgF,eAAiB,IAAI5D,aAA2B,GAAdgB,WAAgB,EACtD,IAAKpC,IAAIwD,EAAI,EAAGA,EAAIpB,YAAaoB,CAAC,GAAI,CACrCxD,IAAIyC,EAAI0D,WAAW3C,GACnB,IAAIxD,IAAIoG,EAAI,EAAGA,EAAI,GAAIA,CAAC,GACvBpB,eAAmB,GAAJxB,EAAS4C,GAAK5D,SAAa,GAAJC,EAAS2D,EAEjD,CAEA,OAAOpB,cACR,EACA7C,iBAAkB,SAAUkE,aAC3B,IAAMC,KAAO,IAAIrE,WAAWoE,WAAW,EAEjCE,MAAS,IAAIC,aAAcC,OAAOH,KAAKI,MAAM,EAAG,KAAS,CAAC,EAE1DC,iBAAmBJ,KAAOK,QADb,cAC+B,EAClD,GAAID,iBAAmB,EACtB,MAAM,IAAIE,MAAM,iCAAiC,EAClD,IAAMzE,YAAc0E,SAAS,yBAAyBC,KAAKR,IAAM,EAAE,EAAE,EACrES,QAAQC,IAAI,eAAgB7E,WAAW,EACvCpC,IAAIkH,WAAa,EAChBC,QAAU,GACVC,MAAQ,GACT,IASSC,KATHC,SAAW,CAChBC,OAAQ,aACRC,IAAK,WACLC,KAAM,YACNC,MAAO,aACPC,MAAO,WACPC,OAAQ,YACRC,MAAO,UACR,EACA,IAASR,QAAQd,KACfG,MAAM,EAAGC,gBAAgB,EACzBmB,MAAM,IAAI,EACVC,OAAO,GAAO3B,EAAE4B,WAAW,WAAW,CAAC,EAAG,CAC3C,GAAM,CAAA,CAAI9I,KAAM+I,MAAQZ,KAAKS,MAAM,GAAG,EAChCI,KAAYZ,SAASpI,OAAS,UACpCkI,MAAMa,MAAQC,KACdf,QAAQc,MAAQf,WAChBA,YAAcJ,SAASoB,KAAUC,QAAQ,SAAU,EAAE,CAAC,EAAI,CAC3D,CACAnB,QAAQC,IAAI,gBAAiBC,WAAYE,MAAOD,OAAO,EAEvDnH,IAAIoI,SAAW,IAAIC,SAClBhC,YACAM,iBAhCkB,eAgCYpB,MAC/B,EACI+C,IAAM,EACV,IAAMC,MAAQ,IAAIC,MACjB,GACA,CACCC,IAAIC,OAAQrB,MACX,GAAKD,MAAMC,MACX,OAAOe,SAAShB,MAAMC,OACrBiB,IAAMpB,WAAaC,QAAQE,MAC3B,CAAA,CACD,EAJkB,MAAM,IAAIR,MAAMQ,KAAO,YAAY,CAKtD,CACD,CACD,EAEAL,QAAQ7B,KAAK,sBAAsB,EACnCnF,IAAI4F,SAAW,IAAIxE,aAAagB,WAAW,EAC3CpC,IAIOC,KAIA0I,QARHC,UAAY,IAAI3C,YAAY7D,WAAW,EAC3C,IAAKkG,IAAM,EAAGA,IAAMlG,YAAakG,GAAG,GACnCM,UAAUN,KAAOA,IACZlB,MAAe,UACdnH,KACLM,KAAKsI,IAAIN,MAAMO,OAAO,EACtBvI,KAAKsI,IAAIN,MAAMQ,OAAO,EACtBxI,KAAKsI,IAAIN,MAAMS,OAAO,EACjBL,QAAU,GAAK,EAAIpI,KAAKsI,IAAI,CAACN,MAAMI,OAAO,GAChD/C,SAAS0C,KAAOrI,KAAO0I,SAExB3B,QAAQiC,QAAQ,sBAAsB,EAEtCjC,QAAQ7B,KAAK,MAAM,EACnByD,UAAUM,KAAK,CAACC,EAAGC,IAAMxD,SAASwD,GAAKxD,SAASuD,EAAE,EAClDnC,QAAQiC,QAAQ,MAAM,EAOtB,IACM/G,OAAS,IAAImH,YADD,GACyBjH,WAAW,EAEtD4E,QAAQ7B,KAAK,cAAc,EAC3B,IAAKnF,IAAIwD,EAAI,EAAGA,EAAIpB,YAAaoB,CAAC,GAAI,CACrC8E,IAAMM,UAAUpF,GAEhB,IA6CO8F,KA7CDC,SAAW,IAAInI,aAAac,OAPjB,GAOyBsB,EAAe,CAAC,EACpDgG,OAAS,IAAIpI,aAAac,OARf,GAQuBsB,EAAgB,GAAO,CAAC,EAC1DiG,KAAO,IAAIC,kBAChBxH,OAVgB,GAWhBsB,EAAgB,GAAQ,GACxB,CACD,EACMmG,IAAM,IAAID,kBACfxH,OAfgB,GAgBhBsB,EAAgB,GAAQ,GAAQ,EAChC,CACD,EAEI4D,MAAe,SACZwC,KAAOrJ,KAAKsJ,KACjBtB,MAAMuB,OAAS,EACdvB,MAAMwB,OAAS,EACfxB,MAAMyB,OAAS,EACfzB,MAAM0B,OAAS,CACjB,EAEAN,IAAI,GAAMpB,MAAMuB,MAAQF,KAAQ,IAAM,IACtCD,IAAI,GAAMpB,MAAMwB,MAAQH,KAAQ,IAAM,IACtCD,IAAI,GAAMpB,MAAMyB,MAAQJ,KAAQ,IAAM,IACtCD,IAAI,GAAMpB,MAAM0B,MAAQL,KAAQ,IAAM,IAEtCJ,OAAO,GAAKjJ,KAAKsI,IAAIN,MAAMO,OAAO,EAClCU,OAAO,GAAKjJ,KAAKsI,IAAIN,MAAMQ,OAAO,EAClCS,OAAO,GAAKjJ,KAAKsI,IAAIN,MAAMS,OAAO,IAElCQ,OAAO,GAAK,IACZA,OAAO,GAAK,IACZA,OAAO,GAAK,IAEZG,IAAI,GAAK,IACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,GAGVJ,SAAS,GAAKhB,MAAMlH,EACpBkI,SAAS,GAAKhB,MAAMjI,EACpBiJ,SAAS,GAAKhB,MAAM2B,EAEhB9C,MAAc,QAEjBqC,KAAK,GAAoC,KAA9B,IADLH,KAAQ,oBACWf,MAAM4B,QAC/BV,KAAK,GAAoC,KAA9B,GAAMH,KAAQf,MAAM6B,QAC/BX,KAAK,GAAoC,KAA9B,GAAMH,KAAQf,MAAM8B,UAE/BZ,KAAK,GAAKlB,MAAM+B,IAChBb,KAAK,GAAKlB,MAAMgC,MAChBd,KAAK,GAAKlB,MAAMiC,MAEbpD,MAAe,QAClBqC,KAAK,GAAM,GAAK,EAAIlJ,KAAKsI,IAAI,CAACN,MAAMI,OAAO,GAAM,IAEjDc,KAAK,GAAK,GAEZ,CAEA,OADAzC,QAAQiC,QAAQ,cAAc,EACvB/G,MACR,CACD,CAAC"}