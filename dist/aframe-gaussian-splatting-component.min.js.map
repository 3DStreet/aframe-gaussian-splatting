{"version":3,"sources":["./index.js"],"names":["AFRAME","registerComponent","schema","src","type","default","init","this","el","sceneEl","renderer","setPixelRatio","fetch","data","then","blob","res","arrayBuffer","let","size","THREE","Vector2","focal","getSize","y","Math","tan","camera","components","fov","PI","geometry","PlaneGeometry","material","ShaderMaterial","uniforms","viewport","value","Float32Array","x","vertexShader","fragmentShader","blending","CustomBlending","blendSrcAlpha","OneFactor","depthTest","depthWrite","window","addEventListener","vertexCount","floor","buffer","byteLength","f_buffer","u_buffer","Uint8Array","matrices","i","quat","Quaternion","center","Vector3","scale","mtx","Matrix4","mtx_t","makeRotationFromQuaternion","transpose","clone","premultiply","setPosition","elements","j","camera_mtx","object3D","matrixWorld","view","iMesh","InstancedMesh","frustumCulled","instanceMatrix","array","sortSplats","needsUpdate","add","worker","Worker","URL","createObjectURL","Blob","createWorker","toString","postMessage","sortFunction","onmessage","e","sortedMatrices","sortReady","tick","time","timeDelta","self","eval","length","maxDepth","Infinity","minDepth","depthList","sizeList","Int32Array","depth","depthInv","counts0","Uint32Array","starts0","depthIndex","k"],"mappings":"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"}