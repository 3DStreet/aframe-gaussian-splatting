{"version":3,"sources":["./index.js"],"names":["AFRAME","registerComponent","schema","src","type","default","init","this","el","sceneEl","renderer","setPixelRatio","fetch","data","then","blob","res","arrayBuffer","let","size","THREE","Vector2","focal","getSize","y","Math","tan","camera","components","fov","PI","u_buffer","Uint8Array","buffer","processPlyBuffer","vertexCount","floor","byteLength","f_buffer","Float32Array","matrices","console","log","paddedCenterCovariances","paddedColors","i","quat","Quaternion","center","Vector3","scale","mtx","Matrix4","mtx_t","makeRotationFromQuaternion","transpose","clone","destOffset","premultiply","setPosition","x","z","elements","j","centerCovarianceTexture","DataTexture","RGBAFormat","FloatType","colorTexture","needsUpdate","camera_mtx","object3D","matrixWorld","view","splatIndexArray","sortSplats","splatIndexes","InstancedBufferAttribute","baseGeometry","setUsage","DynamicDrawUsage","BufferGeometry","positionsArray","positions","BufferAttribute","geometry","setAttribute","setXYZ","InstancedBufferGeometry","copy","instanceCount","material","ShaderMaterial","uniforms","viewport","value","vertexShader","fragmentShader","blending","CustomBlending","blendSrcAlpha","OneFactor","depthTest","depthWrite","transparent","window","addEventListener","mesh","Mesh","frustumCulled","add","worker","Worker","URL","createObjectURL","Blob","createWorker","toString","postMessage","sortFunction","onmessage","indexes","Uint32Array","e","sortedIndexes","attributes","splatIndex","set","length","sortReady","tick","time","timeDelta","self","eval","maxDepth","Infinity","minDepth","depthList","sizeList","Int32Array","depth","depthInv","counts0","starts0","depthIndex","inputBuffer","ubuf","header","TextDecoder","decode","slice","header_end_index","indexOf","Error","parseInt","exec","row_offset","offsets","types","prop","TYPE_MAP","double","int","uint","float","short","ushort","uchar","split","filter","k","startsWith","name","arrayType","replace","dataView","DataView","row","attrs","Proxy","get","target","opacity","sizeIndex","exp","scale_0","scale_1","scale_2","timeEnd","sort","b","a","ArrayBuffer","SH_C0","position","scales","rgba","Uint8ClampedArray","rot","qlen","sqrt","rot_0","rot_1","rot_2","rot_3","f_dc_0","f_dc_1","f_dc_2","red","green","blue"],"mappings":"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"}