{"version":3,"sources":["./index.js"],"names":["AFRAME","registerComponent","schema","src","type","default","init","this","el","sceneEl","renderer","setPixelRatio","fetch","data","then","blob","res","arrayBuffer","let","size","THREE","Vector2","focal","getSize","y","Math","tan","camera","components","fov","PI","u_buffer","Uint8Array","buffer","processPlyBuffer","vertexCount","floor","byteLength","f_buffer","Float32Array","matrices","console","log","centerAndScaleData","convAndColorData","Uint32Array","convAndColorData_uint8","convAndColorData_int16","Int16Array","i","quat","Quaternion","center","Vector3","scale","mtx","Matrix4","mtx_t","makeRotationFromQuaternion","transpose","clone","cov_indexes","premultiply","setPosition","max_value","j","length","abs","elements","destOffset","x","z","parseInt","centerAndScaleTexture","DataTexture","RGBA","FloatType","convAndColorTexture","needsUpdate","RGBAIntegerFormat","UnsignedIntType","camera_mtx","internalFormat","object3D","matrixWorld","view","splatIndexArray","sortSplats","splatIndexes","InstancedBufferAttribute","baseGeometry","setUsage","DynamicDrawUsage","BufferGeometry","positionsArray","positions","BufferAttribute","geometry","setAttribute","setXYZ","InstancedBufferGeometry","copy","instanceCount","material","ShaderMaterial","uniforms","viewport","value","vertexShader","fragmentShader","blending","CustomBlending","blendSrcAlpha","OneFactor","depthTest","depthWrite","transparent","window","addEventListener","mesh","Mesh","frustumCulled","add","worker","Worker","URL","createObjectURL","Blob","createWorker","toString","postMessage","sortFunction","onmessage","indexes","e","sortedIndexes","attributes","splatIndex","set","sortReady","tick","time","timeDelta","self","eval","maxDepth","Infinity","minDepth","depthList","sizeList","Int32Array","depth","depthInv","counts0","starts0","depthIndex","inputBuffer","ubuf","header","TextDecoder","decode","slice","header_end_index","indexOf","Error","exec","row_offset","offsets","types","prop","TYPE_MAP","double","int","uint","float","short","ushort","uchar","split","filter","k","startsWith","name","arrayType","replace","dataView","DataView","row","attrs","Proxy","get","target","opacity","sizeIndex","exp","scale_0","scale_1","scale_2","timeEnd","sort","b","a","ArrayBuffer","SH_C0","position","scales","rgba","Uint8ClampedArray","rot","qlen","sqrt","rot_0","rot_1","rot_2","rot_3","f_dc_0","f_dc_1","f_dc_2","red","green","blue"],"mappings":"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"}