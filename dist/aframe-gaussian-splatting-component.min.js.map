{"version":3,"sources":["./index.js"],"names":["AFRAME","registerComponent","schema","src","type","default","init","this","el","sceneEl","renderer","setPixelRatio","fetch","data","then","blob","res","arrayBuffer","let","size","THREE","Vector2","focal","getSize","y","Math","tan","camera","components","fov","PI","u_buffer","Uint8Array","buffer","processPlyBuffer","vertexCount","floor","byteLength","f_buffer","Float32Array","matrices","console","log","paddedCenterCovariances","paddedCenterCovariances_uint8","paddedCenterCovariances_int16","Int16Array","paddedCenterCovariances_uint32","Uint32Array","i","quat","Quaternion","center","Vector3","scale","mtx","Matrix4","mtx_t","makeRotationFromQuaternion","transpose","clone","cov_indexes","premultiply","setPosition","max_value","j","length","abs","elements","destOffset","x","z","parseInt","centerCovarianceTexture","DataTexture","RGBAIntegerFormat","UnsignedIntType","camera_mtx","internalFormat","needsUpdate","object3D","matrixWorld","view","splatIndexArray","sortSplats","splatIndexes","InstancedBufferAttribute","baseGeometry","setUsage","DynamicDrawUsage","BufferGeometry","positionsArray","positions","BufferAttribute","geometry","setAttribute","setXYZ","InstancedBufferGeometry","copy","instanceCount","material","ShaderMaterial","uniforms","viewport","value","vertexShader","fragmentShader","blending","CustomBlending","blendSrcAlpha","OneFactor","depthTest","depthWrite","transparent","window","addEventListener","mesh","Mesh","frustumCulled","add","worker","Worker","URL","createObjectURL","Blob","createWorker","toString","postMessage","sortFunction","onmessage","indexes","e","sortedIndexes","attributes","splatIndex","set","sortReady","tick","time","timeDelta","self","eval","maxDepth","Infinity","minDepth","depthList","sizeList","Int32Array","depth","depthInv","counts0","starts0","depthIndex","inputBuffer","ubuf","header","TextDecoder","decode","slice","header_end_index","indexOf","Error","exec","row_offset","offsets","types","prop","TYPE_MAP","double","int","uint","float","short","ushort","uchar","split","filter","k","startsWith","name","arrayType","replace","dataView","DataView","row","attrs","Proxy","get","target","opacity","sizeIndex","exp","scale_0","scale_1","scale_2","timeEnd","sort","b","a","ArrayBuffer","SH_C0","position","scales","rgba","Uint8ClampedArray","rot","qlen","sqrt","rot_0","rot_1","rot_2","rot_3","f_dc_0","f_dc_1","f_dc_2","red","green","blue"],"mappings":"AAAAA,OAAOC,kBAAkB,qBAAsB,CAC9CC,OAAQ,CACPC,IAAK,CAACC,KAAM,SAAUC,QAAS,aAAa,CAC7C,EACAC,KAAM,WACLC,KAAKC,GAAGC,QAAQC,SAASC,cAAc,CAAC,EAExCC,MAAML,KAAKM,KAAKV,GAAG,EAClBW,KAAK,MAAUD,KAAKE,KAAK,CAAC,EAC1BD,KAAK,KAASE,IAAIC,YAAY,CAAC,EAC/BH,KAAK,SACLI,IAAIC,KAAO,IAAIC,MAAMC,QAGfC,OAFNf,KAAKC,GAAGC,QAAQC,SAASa,QAAQJ,IAAI,EAEtBA,KAAKK,EAAI,EAAOC,KAAKC,IAAInB,KAAKC,GAAGC,QAAQkB,OAAOnB,GAAGoB,WAAWD,OAAOd,KAAKgB,IAAM,EAAMJ,KAAKK,GAAK,GAAK,GAEpHZ,IAAIa,SAAW,IAAIC,WAAWC,MAAM,EAEpB,KAAfF,SAAS,IACM,KAAfA,SAAS,IACM,KAAfA,SAAS,IACM,IAAfA,SAAS,KAETE,OAAS1B,KAAK2B,iBAAiBD,MAAM,EACrCF,SAAW,IAAIC,WAAWC,MAAM,GAIjCf,IAAIiB,YAAcV,KAAKW,MAAMH,OAAOI,WADlB,EACwC,EAC1DnB,IAAIoB,SAAW,IAAIC,aAAaN,MAAM,EAOlCO,UALa,QAAdL,cACFM,QAAQC,IAAI,qCAAsCP,WAAW,EAC7DA,YAAcV,KAAKW,MAAM,OAAW,GAGtB,IAAIG,aAA2B,GAAdJ,WAAgB,GAC1CQ,wBAA0B,IAAIJ,aAAa,QAAe,EAC1DK,8BAAgC,IAAIZ,WAAWW,wBAAwBV,MAAM,EAC7EY,8BAAgC,IAAIC,WAAWH,wBAAwBV,MAAM,EAC7Ec,OAAiC,IAAIC,YAAYL,wBAAwBV,MAAM,EACrF,IAAKf,IAAI+B,EAAI,EAAGA,EAAId,YAAac,CAAC,GAAI,CACrC/B,IAAIgC,KAAO,IAAI9B,MAAM+B,YACnBpB,SAAS,GAAKkB,EAAI,GAAK,GAAK,KAAO,KACnClB,SAAS,GAAKkB,EAAI,GAAK,GAAK,KAAO,IACpC,EAAElB,SAAS,GAAKkB,EAAI,GAAK,GAAK,KAAO,KACpClB,SAAS,GAAKkB,EAAI,IAAU,KAAO,GACrC,EACIG,OAAS,IAAIhC,MAAMiC,QACtBf,SAAS,EAAIW,EAAI,GACjBX,SAAS,EAAIW,EAAI,GACjB,CAACX,SAAS,EAAIW,EAAI,EACnB,EACIK,MAAQ,IAAIlC,MAAMiC,QACrBf,SAAS,EAAIW,EAAI,GACjBX,SAAS,EAAIW,EAAI,EAAI,GACrBX,SAAS,EAAIW,EAAI,EAAI,EACtB,EAEIM,IAAM,IAAInC,MAAMoC,QAIhBC,MAHJF,IAAIG,2BAA2BR,IAAI,EACnCK,IAAII,UAAU,EACdJ,IAAID,MAAMA,KAAK,EACHC,IAAIK,MAAM,GAKlBC,aAJJN,IAAII,UAAU,EACdJ,IAAIO,YAAYL,IAAK,EACrBF,IAAIQ,YAAYX,MAAM,EAEJ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,KAClClC,IAAI8C,UAAY,EAChB,IAAI9C,IAAI+C,EAAI,EAAGA,EAAIJ,YAAYK,OAAQD,CAAC,GACpCxC,KAAK0C,IAAIZ,IAAIa,SAASP,YAAYI,GAAG,EAAID,YAC3CA,UAAYvC,KAAK0C,IAAIZ,IAAIa,SAASP,YAAYI,GAAG,GAInD/C,IAAImD,WAAiB,EAAJpB,EACjBN,wBAAwB0B,WAAa,GAAKjB,OAAOkB,EACjD3B,wBAAwB0B,WAAa,GAAKjB,OAAO5B,EACjDmB,wBAAwB0B,WAAa,GAAKjB,OAAOmB,EACjD5B,wBAAwB0B,WAAa,GAAKL,UAAY,MAEtDK,WAA2B,GAAT,EAAJpB,EAAQ,GACtB,IAAI/B,IAAI+C,EAAI,EAAGA,EAAIJ,YAAYK,OAAQD,CAAC,GACvCpB,8BAA8BwB,WAAaJ,GAAKO,SAAwC,MAA/BjB,IAAIa,SAASP,YAAYI,IAAgBD,SAAS,EAK5GpB,+BADAyB,WAA2B,GAAT,EAAJpB,EAAQ,IACqB,GAAKlB,SAAS,GAAKkB,EAAI,IAClEL,8BAA8ByB,WAAa,GAAKtC,SAAS,GAAKkB,EAAI,GAAK,GACvEL,8BAA8ByB,WAAa,GAAKtC,SAAS,GAAKkB,EAAI,GAAK,GACvEL,8BAA8ByB,WAAa,GAAKtC,SAAS,GAAKkB,EAAI,GAAK,GAEvE,IAAI/B,IAAI+C,EAAI,EAAGA,EAAI,GAAIA,CAAC,GACvBzB,SAAa,GAAJS,EAASgB,GAAKV,IAAIa,SAASH,EAEtC,CAEA,IAAMQ,OAA0B,IAAIrD,MAAMsD,YAAY3B,OAAgC,KAAM,KAAM3B,MAAMuD,kBAAmBvD,MAAMwD,eAAe,EAI1IC,YAHNJ,OAAwBK,eAAiB,WACzCL,OAAwBM,YAAc,CAAA,EAEnBxE,KAAKC,GAAGC,QAAQkB,OAAOnB,GAAGwE,SAASC,YAAYb,UAC9Dc,WAAO,IAAI3C,aAAa,CAACsC,WAAW,GAAIA,WAAW,GAAIA,WAAW,IAAI,EACtEM,WAAkB5E,KAAK6E,WAAW5C,SAAU0C,UAAI,EAC9CG,WAAe,IAAIjE,MAAMkE,yBAAyBH,WAAiB,EAAG,CAAA,CAAK,EAG3EI,cAFNF,WAAaG,SAASpE,MAAMqE,gBAAgB,EAEvB,IAAIrE,MAAMsE,gBACzBC,eAAiB,IAAIpD,aAAa,EAAK,EACvCqD,eAAY,IAAIxE,MAAMyE,gBAAgBF,eAAgB,CAAC,EAUvDG,gBATNP,aAAaQ,aAAa,WAAYH,cAAS,EAC/CA,eAAUI,OAAO,EAAG,CAAC,EAAK,EAAK,CAAG,EAClCJ,eAAUI,OAAO,EAAG,EAAK,EAAK,CAAG,EACjCJ,eAAUI,OAAO,EAAG,CAAC,EAAK,CAAC,EAAK,CAAG,EACnCJ,eAAUI,OAAO,EAAG,CAAC,EAAK,CAAC,EAAK,CAAG,EACnCJ,eAAUI,OAAO,EAAG,EAAK,EAAK,CAAG,EACjCJ,eAAUI,OAAO,EAAG,EAAK,CAAC,EAAK,CAAG,EAClCJ,eAAUb,YAAc,CAAA,GAEP,IAAI3D,MAAM6E,yBAA0BC,KAAKX,YAAY,GACtEO,eAASC,aAAa,aAAcV,UAAY,EAChDS,eAASK,cAAgBhE,YAEzB,MAAMiE,SAAW,IAAIhF,MAAMiF,eAAgB,CAC1CC,SAAW,CACVC,SAAU,CAACC,MAAO,IAAIjE,aAAa,CAACpB,KAAKmD,EAAGnD,KAAKK,EAAE,CAAC,EACpDF,MAAO,CAACkF,MAAOlF,KAAK,EACpBmD,wBAAyB,CAAC+B,MAAO/B,MAAuB,CACzD,EACAgC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAwGAC;;;;;;;;;;MAWAC,SAAWvF,MAAMwF,eACjBC,cAAgBzF,MAAM0F,UACtBC,UAAY,CAAA,EACZC,WAAY,CAAA,EACZC,YAAa,CAAA,CACd,CAAE,EAEFC,OAAOC,iBAAiB,SAAU,KACjCjG,IAAIC,KAAO,IAAIC,MAAMC,QAEfC,OADNf,KAAKC,GAAGC,QAAQC,SAASa,QAAQJ,IAAI,EACtBA,KAAKK,EAAI,EAAOC,KAAKC,IAAInB,KAAKC,GAAGC,QAAQkB,OAAOnB,GAAGoB,WAAWD,OAAOd,KAAKgB,IAAM,EAAMJ,KAAKK,GAAK,GAAK,GACpHsE,SAASE,SAASC,SAASC,MAAM,GAAKrF,KAAKmD,EAC3C8B,SAASE,SAASC,SAASC,MAAM,GAAKrF,KAAKK,EAC3C4E,SAASE,SAAShF,MAAMkF,MAAQlF,KACjC,CAAC,EAEDJ,IAAIkG,KAAO,IAAIhG,MAAMiG,KAAKvB,eAAUM,SAAUjE,WAAW,EACzDiF,KAAKE,cAAgB,CAAA,EACrB/G,KAAKC,GAAGwE,SAASuC,IAAIH,IAAI,EAEzB7G,KAAKiH,OAAS,IAAIC,OACjBC,IAAIC,gBACH,IAAIC,KAAK,CAAC,IAAKrH,KAAKsH,aAAaC,SAAS,EAAG,WAAY,CACxD1H,KAAM,wBACP,CAAC,CACF,CACD,EAEAG,KAAKiH,OAAOO,YAAY,CACvBC,aAAczH,KAAK6E,WAAW0C,SAAS,EACvCtF,SAASA,SAASP,MACnB,EAAG,CAACO,SAASP,OAAO,EAEpB1B,KAAKiH,OAAOS,UAAY,IACnBC,EAAU,IAAIlF,YAAYmF,EAAEtH,KAAKuH,aAAa,EAClDhB,KAAKtB,SAASuC,WAAWC,WAAWC,IAAIL,CAAO,EAC/Cd,KAAKtB,SAASuC,WAAWC,WAAWvD,YAAc,CAAA,EAClDqC,KAAKtB,SAASK,cAAgB+B,EAAQhE,OACtC3D,KAAKiI,UAAY,CAAA,CAClB,EACAjI,KAAKiI,UAAY,CAAA,CAClB,CAAC,CACF,EACAC,KAAM,SAASC,KAAMC,WACpB,IAGKzD,WAHF3E,KAAKiI,YACPjI,KAAKiI,UAAY,CAAA,EACX3D,WAAatE,KAAKC,GAAGC,QAAQkB,OAAOnB,GAAGwE,SAASC,YAAYb,SAC9Dc,WAAO,IAAI3C,aAAa,CAACsC,WAAW,GAAIA,WAAW,GAAIA,WAAW,IAAI,EAC1EtE,KAAKiH,OAAOO,YAAY,CAAC7C,KAAAA,UAAI,EAAG,CAACA,WAAKjD,OAAO,EAE/C,EACA4F,aAAc,SAAUe,MACvB1H,IAAI8G,aACAxF,SACJoG,KAAKX,UAAY,IAQhB,GAPGE,EAAEtH,KAAKmH,eACTa,KAAKV,EAAEtH,KAAKmH,YAAY,EACxBA,aAAe5C,YAEb+C,EAAEtH,KAAK2B,WACTA,SAAW,IAAID,aAAa4F,EAAEtH,KAAK2B,QAAQ,GAEzC2F,EAAEtH,KAAKqE,KAAK,CACd,MAAMA,KAAO,IAAI3C,aAAa4F,EAAEtH,KAAKqE,IAAI,EACnCkD,cAAgBJ,aAAaxF,SAAU0C,IAAI,EACjD0D,KAAKb,YAAY,CAACK,cAAAA,aAAa,EAAG,CAACA,cAAcnG,OAAO,CACzD,CACD,CACD,EACAmD,WAAY,SAASA,WAAW5C,SAAU0C,MACzC,IAAM/C,YAAcK,SAAS0B,OAAO,GAEpChD,IAAI4H,SAAYC,CAAAA,EAAAA,EACZC,SAAWD,EAAAA,EACf7H,IAAI+H,UAAY,IAAI1G,aAAaJ,WAAW,EACxC+G,SAAW,IAAIC,WAAWF,UAAUhH,MAAM,EAC9C,IAAKf,IAAI+B,EAAI,EAAGA,EAAId,YAAac,CAAC,GAAI,CACrC/B,IAAIkI,MACH,EAAGlE,KAAK,GAAK1C,SAAa,GAAJS,EAAS,IAC9BiC,KAAK,GAAK1C,SAAa,GAAJS,EAAS,IAC5BiC,KAAK,GAAK1C,SAAa,GAAJS,EAAS,MAC9BgG,UAAUhG,GAAKmG,OACHN,WAAUA,SAAWM,OAC7BA,MAAQJ,WAAUA,SAAWI,MAClC,CAGAlI,IAAImI,SAAW,OAAmBP,SAAWE,UACzCM,QAAU,IAAItG,YAAY,KAAO,EACrC,IAAK9B,IAAI+B,EAAI,EAAGA,EAAId,YAAac,CAAC,GACjCiG,SAASjG,IAAOgG,UAAUhG,GAAK+F,UAAYK,SAAY,EACvDC,QAAQJ,SAASjG,GAAG,GAErB/B,IAAIqI,QAAU,IAAIvG,YAAY,KAAO,EACrC,IAAK9B,IAAI+B,EAAI,EAAGA,EAAI,MAASA,CAAC,GAAIsG,QAAQtG,GAAKsG,QAAQtG,EAAI,GAAKqG,QAAQrG,EAAI,GAC5E/B,IAAIsI,WAAa,IAAIxG,YAAYb,WAAW,EAC5C,IAAKjB,IAAI+B,EAAI,EAAGA,EAAId,YAAac,CAAC,GAAIuG,WAAWD,QAAQL,SAASjG,GAAG,IAAMA,EAE3E,OAAOuG,UACR,EACAtH,iBAAkB,SAAUuH,aAC3B,IAAMC,KAAO,IAAI1H,WAAWyH,WAAW,EAEjCE,MAAS,IAAIC,aAAcC,OAAOH,KAAKI,MAAM,EAAG,KAAS,CAAC,EAE1DC,iBAAmBJ,KAAOK,QADb,cAC+B,EAClD,GAAID,iBAAmB,EACtB,MAAM,IAAIE,MAAM,iCAAiC,EAClD,IAAM9H,YAAcqC,SAAS,yBAAyB0F,KAAKP,IAAM,EAAE,EAAE,EACrElH,QAAQC,IAAI,eAAgBP,WAAW,EACvCjB,IAAIiJ,WAAa,EAChBC,QAAU,GACVC,MAAQ,GACT,IASSC,KATHC,SAAW,CAChBC,OAAQ,aACRC,IAAK,WACLC,KAAM,YACNC,MAAO,aACPC,MAAO,WACPC,OAAQ,YACRC,MAAO,UACR,EACA,IAASR,QAAQX,KACfG,MAAM,EAAGC,gBAAgB,EACzBgB,MAAM,IAAI,EACVC,OAAO,GAAOC,EAAEC,WAAW,WAAW,CAAC,EAAG,CAC3C,GAAM,CAAA,CAAI9K,KAAM+K,MAAQb,KAAKS,MAAM,GAAG,EAChCK,KAAYb,SAASnK,OAAS,UACpCiK,MAAMc,MAAQC,KACdhB,QAAQe,MAAQhB,WAChBA,YAAc3F,SAAS4G,KAAUC,QAAQ,SAAU,EAAE,CAAC,EAAI,CAC3D,CACA5I,QAAQC,IAAI,gBAAiByH,WAAYE,MAAOD,OAAO,EAEvDlJ,IAAIoK,SAAW,IAAIC,SAClB9B,YACAM,iBAhCkB,eAgCY7F,MAC/B,EACIsH,IAAM,EACV,IAAMC,MAAQ,IAAIC,MACjB,GACA,CACCC,IAAIC,OAAQtB,MACX,GAAKD,MAAMC,MACX,OAAOgB,SAASjB,MAAMC,OACrBkB,IAAMrB,WAAaC,QAAQE,MAC3B,CAAA,CACD,EAJkB,MAAM,IAAIL,MAAMK,KAAO,YAAY,CAKtD,CACD,CACD,EAEA7H,QAAQiG,KAAK,sBAAsB,EACnCxH,IAAIgI,SAAW,IAAI3G,aAAaJ,WAAW,EAC3CjB,IAIOC,KAIA0K,QARHC,UAAY,IAAI9I,YAAYb,WAAW,EAC3C,IAAKqJ,IAAM,EAAGA,IAAMrJ,YAAaqJ,GAAG,GACnCM,UAAUN,KAAOA,IACZnB,MAAe,UACdlJ,KACLM,KAAKsK,IAAIN,MAAMO,OAAO,EACtBvK,KAAKsK,IAAIN,MAAMQ,OAAO,EACtBxK,KAAKsK,IAAIN,MAAMS,OAAO,EACjBL,QAAU,GAAK,EAAIpK,KAAKsK,IAAI,CAACN,MAAMI,OAAO,GAChD3C,SAASsC,KAAOrK,KAAO0K,SAExBpJ,QAAQ0J,QAAQ,sBAAsB,EAEtC1J,QAAQiG,KAAK,MAAM,EACnBoD,UAAUM,KAAK,CAACC,EAAGC,IAAMpD,SAASoD,GAAKpD,SAASmD,EAAE,EAClD5J,QAAQ0J,QAAQ,MAAM,EAOtB,IACMlK,OAAS,IAAIsK,YADD,GACyBpK,WAAW,EAEtDM,QAAQiG,KAAK,cAAc,EAC3B,IAAKxH,IAAI+C,EAAI,EAAGA,EAAI9B,YAAa8B,CAAC,GAAI,CACrCuH,IAAMM,UAAU7H,GAEhB,IA6COuI,KA7CDC,SAAW,IAAIlK,aAAaN,OAPjB,GAOyBgC,EAAe,CAAC,EACpDyI,OAAS,IAAInK,aAAaN,OARf,GAQuBgC,EAAgB,GAAO,CAAC,EAC1D0I,KAAO,IAAIC,kBAChB3K,OAVgB,GAWhBgC,EAAgB,GAAQ,GACxB,CACD,EACM4I,IAAM,IAAID,kBACf3K,OAfgB,GAgBhBgC,EAAgB,GAAQ,GAAQ,EAChC,CACD,EAEIoG,MAAe,SACZyC,KAAOrL,KAAKsL,KACjBtB,MAAMuB,OAAS,EACdvB,MAAMwB,OAAS,EACfxB,MAAMyB,OAAS,EACfzB,MAAM0B,OAAS,CACjB,EAEAN,IAAI,GAAMpB,MAAMuB,MAAQF,KAAQ,IAAM,IACtCD,IAAI,GAAMpB,MAAMwB,MAAQH,KAAQ,IAAM,IACtCD,IAAI,GAAMpB,MAAMyB,MAAQJ,KAAQ,IAAM,IACtCD,IAAI,GAAMpB,MAAM0B,MAAQL,KAAQ,IAAM,IAEtCJ,OAAO,GAAKjL,KAAKsK,IAAIN,MAAMO,OAAO,EAClCU,OAAO,GAAKjL,KAAKsK,IAAIN,MAAMQ,OAAO,EAClCS,OAAO,GAAKjL,KAAKsK,IAAIN,MAAMS,OAAO,IAElCQ,OAAO,GAAK,IACZA,OAAO,GAAK,IACZA,OAAO,GAAK,IAEZG,IAAI,GAAK,IACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,GAGVJ,SAAS,GAAKhB,MAAMnH,EACpBmI,SAAS,GAAKhB,MAAMjK,EACpBiL,SAAS,GAAKhB,MAAMlH,EAEhB8F,MAAc,QAEjBsC,KAAK,GAAoC,KAA9B,IADLH,KAAQ,oBACWf,MAAM2B,QAC/BT,KAAK,GAAoC,KAA9B,GAAMH,KAAQf,MAAM4B,QAC/BV,KAAK,GAAoC,KAA9B,GAAMH,KAAQf,MAAM6B,UAE/BX,KAAK,GAAKlB,MAAM8B,IAChBZ,KAAK,GAAKlB,MAAM+B,MAChBb,KAAK,GAAKlB,MAAMgC,MAEbpD,MAAe,QAClBsC,KAAK,GAAM,GAAK,EAAIlL,KAAKsK,IAAI,CAACN,MAAMI,OAAO,GAAM,IAEjDc,KAAK,GAAK,GAEZ,CAEA,OADAlK,QAAQ0J,QAAQ,cAAc,EACvBlK,MACR,CACD,CAAC"}